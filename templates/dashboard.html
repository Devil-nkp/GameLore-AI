{% extends "base.html" %}
{% block content %}
<div class="max-w-7xl mx-auto">
    <div class="flex justify-between items-end mb-8 border-b border-white/10 pb-4">
        <div>
            <h2 class="text-3xl font-bold text-white glow-text">Your Archive</h2>
            <p class="text-slate-400 text-sm mt-1">Manage your generated assets and videos.</p>
        </div>
        <div class="text-right">
            <span class="block text-xs text-purple-400 font-bold uppercase tracking-wider">Credits Available</span>
            <span class="text-2xl font-mono text-white">{{ user.credits }}</span>
        </div>
    </div>
    
    <div class="grid gap-6">
        {% if gens %}
            {% for gen in gens %}
            <div class="glass p-6 rounded-xl border border-slate-700/50 flex flex-col md:flex-row gap-6 hover:border-purple-500/30 transition group">
                <div class="w-full md:w-48 h-48 shrink-0 rounded-lg overflow-hidden border border-slate-600 bg-black relative">
                    <img src="{{ gen.selected_image }}" class="w-full h-full object-cover group-hover:scale-105 transition duration-500">
                    {% if gen.video_url %}
                    <div class="absolute top-2 right-2 bg-purple-600 text-white text-[10px] font-bold px-2 py-1 rounded shadow-lg">VIDEO READY</div>
                    {% endif %}
                </div>

                <div class="flex-1 min-w-0">
                    <div class="flex justify-between items-start mb-2">
                        <span class="inline-block bg-slate-800 text-purple-300 text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider border border-slate-700">
                            {{ gen.type }}
                        </span>
                        <span class="text-xs text-slate-500 font-mono">{{ gen.timestamp.strftime('%Y-%m-%d') }}</span>
                    </div>
                    
                    <p class="text-slate-300 text-sm line-clamp-3 mb-4 leading-relaxed border-l-2 border-purple-500/20 pl-4">
                        {{ gen.content[:250] }}...
                    </p>
                    
                    <div class="flex flex-wrap gap-2 mt-auto">
                        <a href="{{ gen.selected_image }}" target="_blank" class="px-3 py-1.5 bg-slate-700 hover:bg-slate-600 rounded text-xs text-white transition flex items-center gap-1">
                            <span>ğŸ–¼ï¸</span> View Image
                        </a>
                        {% if gen.video_url %}
                        <a href="{{ gen.video_url }}" target="_blank" class="px-3 py-1.5 bg-purple-900/50 hover:bg-purple-900 border border-purple-500/50 rounded text-xs text-purple-200 transition flex items-center gap-1">
                            <span>ğŸ¥</span> Watch Video
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="text-center py-20 bg-slate-900/50 rounded-2xl border border-white/5 border-dashed">
                <div class="text-4xl mb-4 opacity-50">ğŸ”®</div>
                <p class="text-slate-500 mb-4">No artifacts found in the archives.</p>
                <a href="/generate_visuals" class="text-purple-400 hover:text-purple-300 font-bold underline">Initialize Visual Genesis</a>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
