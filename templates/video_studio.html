{% extends "base.html" %}
{% block content %}
<div class="max-w-5xl mx-auto" x-data="{ tab: 'upload', loading: false }">
    <div class="text-center mb-10">
        <h1 class="text-5xl md:text-7xl font-black mb-4 text-transparent bg-clip-text bg-gradient-to-br from-pink-400 via-red-500 to-yellow-500 pb-2">Video Studio</h1>
        <p class="text-slate-400 text-lg">Animate Static Assets into Motion.</p>
    </div>

    <div class="grid md:grid-cols-2 gap-8">
        
        <div class="glass p-8 rounded-3xl border border-white/5 h-fit">
            <div class="flex bg-slate-900/50 p-1 rounded-xl mb-6">
                <button @click="tab = 'upload'" :class="tab === 'upload' ? 'bg-slate-700 text-white shadow' : 'text-slate-500 hover:text-white'" class="flex-1 py-2 rounded-lg text-sm font-bold transition">Upload File</button>
                <button @click="tab = 'url'" :class="tab === 'url' ? 'bg-slate-700 text-white shadow' : 'text-slate-500 hover:text-white'" class="flex-1 py-2 rounded-lg text-sm font-bold transition">Paste URL</button>
            </div>

            <form hx-post="/video_studio" hx-target="#video-output" hx-encoding="multipart/form-data" @submit="loading = true" hx-on::after-request="loading = false">
                
                <div x-show="tab === 'upload'" class="mb-6">
                    <div class="border-2 border-dashed border-slate-700 rounded-xl p-8 text-center hover:border-purple-500 transition group cursor-pointer relative">
                        <input type="file" name="image_file" accept="image/*" class="absolute inset-0 opacity-0 cursor-pointer w-full h-full">
                        <div class="text-4xl mb-2 group-hover:scale-110 transition">ğŸ“‚</div>
                        <p class="text-sm text-slate-400 font-bold">Click to Upload Image</p>
                    </div>
                </div>

                <div x-show="tab === 'url'" class="mb-6">
                    <label class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-2 block">Image Link</label>
                    <input type="url" name="image_url" placeholder="https://..." class="w-full bg-slate-900 border border-slate-700 rounded-xl p-4 text-white outline-none focus:border-purple-500 transition">
                </div>

                <div class="mb-6">
                    <label class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-2 block">Motion Guide (Prompt)</label>
                    <input type="text" name="prompt" placeholder="e.g. Slow zoom, fire flickering, wind blowing..." class="w-full bg-slate-900 border border-slate-700 rounded-xl p-4 text-white outline-none focus:border-purple-500 transition">
                </div>

                <button class="w-full py-4 rounded-xl font-bold bg-white text-black hover:bg-purple-100 transition shadow-lg flex items-center justify-center gap-2" :disabled="loading">
                    <span x-show="!loading">ğŸ¬ Create Video</span>
                    <span x-show="loading">Rendering (approx 30s)...</span>
                </button>
            </form>
        </div>

        <div id="video-output" class="flex items-center justify-center min-h-[400px] glass rounded-3xl border border-white/5 bg-black/20">
            <div x-show="!loading" class="text-center opacity-50">
                <div class="text-4xl mb-2">ğŸï¸</div>
                <p>Video result will appear here.</p>
            </div>
            <div x-show="loading" class="text-center">
                <div class="loader ease-linear rounded-full border-4 border-t-4 border-purple-500 h-10 w-10 mx-auto mb-4"></div>
                <p class="text-purple-400 animate-pulse">AI is dreaming...</p>
            </div>
        </div>

    </div>
</div>
<style>.loader { border-top-color: #a855f7; -webkit-animation: spinner 1.5s linear infinite; animation: spinner 1.5s linear infinite; } @keyframes spinner { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }</style>
{% endblock %}
